<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Brian's Portfolio</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></noscript>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/css/style.css" />
</head>
<body>
    <!-- Hero Section -->
    <section class="hero-section">
    <div class="content">
        <h1>Hello, I'm Brian A. Paniagua</h1>
            <p>Welcome to my data analytics portfolio.</p>
    </div>
    </section>

    <!-- Sticky Sub-Navbar -->
    <nav id="sub-navbar" class="navbar navbar-expand-lg navbar-dark sub-navbar sticky-top">
        <div class="container-fluid d-flex align-items-center justify-content-between" style="min-height: 9vh;">
            <!-- Current Section Display -->
          <div id="current-section-title" class="fw-medium d-lg-none" style="color: var(--colorprimary);"> <ul><li><strong>Overview</strong></li></ul>
          </div>
    
            <!-- NEEDS FIXING -->
            <!-- Hamburger button -->
            <button class="navbar-toggler" type="button"
            data-bs-toggle="collapse" data-bs-target="#subNavbarNav"
            aria-controls="subNavbarNav" aria-expanded="false" aria-label="Toggle navigation">
            </button>
    
            <!-- Collapsible nav links -->
            <div id="subNavbarNav" class="collapse navbar-collapse justify-content-center">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="#abt">About Me</a></li>
                    <li class="nav-item"><a class="nav-link" href="#xp">Experience</a></li>
                    <li class="nav-item"><a class="nav-link" href="#proj">Projects</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>  

    <!-- About me -->
    <section id="abt">
        <div class="container">
            <h2>About Me</h2>
            <p>This section will include a brief introduction and background.</p>
        </div>
    </section>

    <!-- Experience -->
    <section id="xp">
        <div class="container">
            <h2>Experience</h2>
            <p>This section will include brief description of experience</p>
        </div>
    </section>

    <!-- Projects -->
    <section id="proj">
        <div class="container">
            <h2>Projects</h2>
            <p>This section will include an array of cards that have an image and description of a project.</p>
            <p>These cards have links to a detailed page of the project</p>
        </div>
    </section>

    <!-- contact -->
    <section id="contact">
        <div class="container">
            <h2>Contact</h2>
            <p>This section will include list of ways to contact me.</p>
            <h5 class="links">Connect with me:</h5>
            <div class="social-icons">
                <a href="https://www.linkedin.com/in/brian-a-paniagua" target="_blank" aria-label="LinkedIn">
                <i class="fab fa-linkedin"></i>
                </a>
                <a href="mailto:brianpaniagua4@gmail.com" aria-label="Email">
                <i class="fas fa-envelope"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="container py-5">
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- NEEDS FIXING -->
    <!-- Sub Nav Script -->
    <script>
        // Scroll jump on click with sub nav bar
        const navLinks = document.querySelectorAll("#sub-navbar .nav-link");
        const currentSectionTitle = document.getElementById("current-section-title");
        const dropdownLinks = document.querySelectorAll(".dropdown-item.nav-link");
    
        const sectionMap = {
            "abt": "About Me",
            "xp": "Experience",
            "proj": "Projects",
            "contact": "Contact"
        };

        // Function to get the combined height of the main navbar and sub navbar
        function getNavHeight() {
            const navbar = document.querySelector(".navbar");
            const subNavbar = document.querySelector(".sub-navbar");
            return navbar.offsetHeight + subNavbar.offsetHeight; // Combined height
        }

        // Smooth scroll with offset for navbar height
        navLinks.forEach(link => {
            link.addEventListener("click", function (e) {
                const targetId = this.getAttribute("href").slice(1); // Get target section ID from href (e.g., "#hero" â†’ "hero")
                const targetEl = document.getElementById(targetId);

                if (targetEl) {
                    e.preventDefault(); // Prevent the default anchor behavior

                    // Get the current navbar height dynamically
                    const offset = getNavHeight();

                    // Get the position of the target element relative to the viewport
                    const elementPosition = targetEl.getBoundingClientRect().top;

                    // Calculate the scroll position to move the page, adjusting for the navbar height
                    const offsetPosition = elementPosition + window.scrollY - offset;

                    // Adjust the scroll position by a small correction to ensure full visibility
                    const correctedPosition = offsetPosition + 100; // 10px correction to fix the slight undershoot

                    // Scroll to the target position with smooth animation
                    window.scrollTo({
                        top: correctedPosition,
                        behavior: "smooth"
                    });
                }
            });
        });  
        function getTargetSections() {
            return Array.from(navLinks)
                .map(link => {
                    const id = link.getAttribute("href").slice(1);
                    return document.getElementById(id);
                })
                .filter(section => section !== null);
        }
        // Update label on scroll
        function getCurrentSection() {
            let current = "hero";
            Object.keys(sectionMap).forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    const rect = el.getBoundingClientRect();
                    if (rect.top <= 120 && rect.bottom >= 120) {
                        current = id;
                    }
                }
            });
            currentSectionTitle.textContent = sectionMap[current];
        }
        window.addEventListener("scroll", getCurrentSection);
            getCurrentSection(); // run on load
        window.addEventListener("scroll", () => {
            const sections = getTargetSections();
            let currentSectionId = null;
    
            for (const section of sections) {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 120 && rect.bottom >= 120) {
                    currentSectionId = section.id;
                    break;
                }
            }
            // Only update nav if we have a matched section
            if (currentSectionId) {
                navLinks.forEach(link => {
                    link.classList.remove("active");
                    if (link.getAttribute("href").slice(1) === currentSectionId) {
                        link.classList.add("active");
                    }
                });
            }
        });
        // Close the sub-navbar with a smooth transition when a link is clicked
        const subNavLinks = document.querySelectorAll("#sub-navbar .nav-link");
        const subNavbarCollapse = document.getElementById("subNavbarNav");

        subNavLinks.forEach(link => {
            link.addEventListener("click", function () {
                // Check if the sub-navbar is expanded
                if (subNavbarCollapse.classList.contains("show")) {
                    // Start the collapsing transition
                    const collapseInstance = bootstrap.Collapse.getInstance(subNavbarCollapse);
                    if (collapseInstance) {
                    collapseInstance.hide();
}
                }
            });
        });
    </script>
</body>
</html>

